<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Anime Fanz Fz - Anime Provider</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@600;700&family=Exo+2:wght@300;400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
    :root {
        --orange: #ff6a00;
        --pink: #ff007a;
        --cyan: #00ffe0;
        --purple: #9b00ff;
        --bg: #020510;
        --glass: rgba(255,255,255,0.04);
    }

    * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

    body {
        background-color: var(--bg);
        font-family: 'Exo 2', sans-serif;
        color: white;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        overflow-x: hidden;
        position: relative;
    }

    .bg-scene { position: fixed; inset: 0; z-index: -1; overflow: hidden; }
    .bg-scene::before {
        content: '';
        position: absolute;
        inset: -50%;
        background: 
            radial-gradient(ellipse 60% 40% at 20% 30%, rgba(255,106,0,0.12) 0%, transparent 60%),
            radial-gradient(ellipse 50% 50% at 80% 70%, rgba(155,0,255,0.12) 0%, transparent 60%),
            radial-gradient(ellipse 70% 40% at 50% 90%, rgba(0,255,224,0.08) 0%, transparent 60%);
        animation: aurora-drift 18s ease-in-out infinite alternate;
    }
    @keyframes aurora-drift {
        0%   { transform: translate(0,0) scale(1); }
        33%  { transform: translate(-4%, 3%) scale(1.05); }
        66%  { transform: translate(4%, -3%) scale(0.97); }
        100% { transform: translate(-2%, 5%) scale(1.03); }
    }
    .bg-scene::after {
        content: '';
        position: absolute;
        inset: 0;
        background-image:
            linear-gradient(rgba(0,255,224,0.03) 1px, transparent 1px),
            linear-gradient(90deg, rgba(0,255,224,0.03) 1px, transparent 1px);
        background-size: 40px 40px;
        animation: grid-pulse 6s ease-in-out infinite;
    }
    @keyframes grid-pulse { 0%,100% { opacity: 0.5; } 50% { opacity: 1; } }

    .orb { position: fixed; border-radius: 50%; filter: blur(80px); z-index: -1; animation: orb-float linear infinite; pointer-events: none; }
    .orb-1 { width:280px; height:280px; background:rgba(255,0,122,0.15); top:-10%; left:-10%; animation-duration:22s; }
    .orb-2 { width:220px; height:220px; background:rgba(0,255,224,0.12); bottom:-5%; right:-5%; animation-duration:18s; animation-delay:-9s; }
    .orb-3 { width:180px; height:180px; background:rgba(155,0,255,0.15); top:40%; left:-8%; animation-duration:25s; animation-delay:-5s; }
    @keyframes orb-float { 0%,100% { transform: translateY(0) scale(1); } 50% { transform: translateY(-40px) scale(1.08); } }

    .scan-line {
        position: fixed; top: -2px; left: 0; right: 0; height: 2px;
        background: linear-gradient(90deg, transparent, var(--cyan), transparent);
        animation: scan 6s linear infinite; z-index: 100; opacity: 0.4; pointer-events: none;
    }
    @keyframes scan { 0% { top: -2px; } 100% { top: 100vh; } }

    /* HEADER */
    .header {
        width: 100%; height: 200px; position: relative;
        display: flex; flex-direction: column; justify-content: center; align-items: center;
        overflow: hidden; margin-bottom: 24px;
    }
    .header::before { content: ''; position: absolute; inset: 0; background: linear-gradient(160deg, #1a0028 0%, #050018 50%, #001a1a 100%); }
    .header::after {
        content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px;
        background: linear-gradient(90deg, var(--orange), var(--pink), var(--purple), var(--cyan), var(--orange));
        background-size: 200% 100%; animation: stripe-slide 3s linear infinite;
    }
    @keyframes stripe-slide { to { background-position: 200% 0; } }
    .header-slash {
        position: absolute; top: 0; right: 0; bottom: 0; width: 50%;
        background: linear-gradient(135deg, transparent 40%, rgba(255,0,122,0.06) 100%);
        clip-path: polygon(60% 0, 100% 0, 100% 100%, 20% 100%);
    }
    .header-bottom-clip { position: absolute; bottom: -1px; left: 0; right: 0; height: 40px; background: var(--bg); clip-path: polygon(0 100%, 50% 0%, 100% 100%); }
    .logo-wrap { position: relative; z-index: 2; text-align: center; }
    .logo-tag { font-size: 10px; letter-spacing: 6px; color: var(--cyan); font-weight: 300; text-transform: uppercase; margin-bottom: 8px; animation: fade-in-down 0.8s ease both; opacity: 0.7; }
    .main-title { font-family: 'Rajdhani', sans-serif; font-size: clamp(22px, 7vw, 30px); font-weight: 700; letter-spacing: 8px; text-transform: uppercase; position: relative; animation: fade-in-up 0.8s ease both 0.2s; line-height: 1; }
    .main-title::before, .main-title::after { content: attr(data-text); position: absolute; top: 0; left: 0; width: 100%; }
    .main-title::before { color: var(--pink); clip-path: polygon(0 0, 100% 0, 100% 40%, 0 40%); animation: glitch-top 5s infinite linear; }
    .main-title::after  { color: var(--cyan); clip-path: polygon(0 60%, 100% 60%, 100% 100%, 0 100%); animation: glitch-bottom 5s infinite linear; }
    @keyframes glitch-top    { 0%,90%,100% { transform:translate(0); opacity:0; } 92% { transform:translate(-3px,-1px); opacity:0.8; } 94% { transform:translate(3px,1px); opacity:0.8; } 96% { transform:translate(-2px,0); opacity:0.8; } }
    @keyframes glitch-bottom { 0%,90%,100% { transform:translate(0); opacity:0; } 93% { transform:translate(3px,1px); opacity:0.6; } 95% { transform:translate(-3px,-1px); opacity:0.6; } 97% { transform:translate(2px,0); opacity:0.6; } }
    .logo-sub { font-size: 9px; letter-spacing: 4px; color: rgba(255,255,255,0.3); margin-top: 10px; text-transform: uppercase; animation: fade-in-up 0.8s ease both 0.4s; }
    @keyframes fade-in-up   { from { opacity:0; transform:translateY(15px); } to { opacity:1; transform:translateY(0); } }
    @keyframes fade-in-down { from { opacity:0; transform:translateY(-15px); } to { opacity:1; transform:translateY(0); } }

    /* CARD */
    .card {
        width: 92%; max-width: 400px; background: var(--glass);
        backdrop-filter: blur(24px); -webkit-backdrop-filter: blur(24px);
        border-radius: 28px; padding: 28px 20px;
        border: 1px solid rgba(255,255,255,0.06); text-align: center;
        position: relative; animation: fade-in-up 0.8s ease both 0.5s;
    }
    .card::before, .card::after { content: ''; position: absolute; width: 24px; height: 24px; border-color: var(--cyan); border-style: solid; }
    .card::before { top: -1px; left: -1px; border-width: 2px 0 0 2px; border-radius: 8px 0 0 0; }
    .card::after  { bottom: -1px; right: -1px; border-width: 0 2px 2px 0; border-radius: 0 0 8px 0; }

    /* HUB BUTTON */
    .hub-btn {
        background: linear-gradient(135deg, rgba(0,200,180,0.08), rgba(0,100,150,0.08));
        border: 1px solid rgba(0,255,224,0.15); border-radius: 16px;
        padding: 15px 18px; display: flex; align-items: center; justify-content: space-between;
        text-decoration: none; color: white; margin-bottom: 28px;
        position: relative; overflow: hidden;
        transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    .hub-btn::before { content: ''; position: absolute; inset: 0; background: linear-gradient(135deg, transparent 0%, rgba(0,255,224,0.06) 100%); opacity: 0; transition: opacity 0.3s; }
    .hub-btn:hover::before, .hub-btn:active::before { opacity: 1; }
    .hub-btn-accent { position: absolute; left: 0; top: 0; bottom: 0; width: 3px; background: linear-gradient(180deg, var(--cyan), var(--purple)); border-radius: 3px 0 0 3px; box-shadow: 0 0 12px var(--cyan); animation: accent-pulse 2s ease-in-out infinite; }
    @keyframes accent-pulse { 0%,100% { opacity:1; box-shadow:0 0 8px var(--cyan); } 50% { opacity:0.6; box-shadow:0 0 20px var(--cyan), 0 0 40px var(--purple); } }
    .hub-btn-text { display: flex; align-items: center; gap: 10px; font-weight: 700; font-size: 12px; letter-spacing: 1.5px; text-transform: uppercase; }
    .tg-icon { font-size: 20px; color: var(--cyan); filter: drop-shadow(0 0 8px var(--cyan)); animation: icon-bounce 3s ease-in-out infinite; }
    @keyframes icon-bounce { 0%,100% { transform: translateY(0); } 50% { transform: translateY(-4px); } }
    .hub-arrow { width: 32px; height: 32px; border-radius: 50%; background: rgba(0,255,224,0.1); border: 1px solid rgba(0,255,224,0.3); display: flex; align-items: center; justify-content: center; color: var(--cyan); font-size: 12px; }

    /* START BUTTON */
    .btn-container { position: relative; width: 160px; height: 160px; margin: 0 auto 28px; }
    /* Style 4+5 Combination â€” Conic Gradient + Comet Trail */
    @keyframes orbit-spin   { to { transform: rotate(360deg);  } }
    @keyframes orbit-spin-r { to { transform: rotate(-360deg); } }

    /* Outer conic ring â€” clockwise */
    .orbit-outer {
        position: absolute; inset: -4px; border-radius: 50%;
        border: 4px solid transparent;
        background: linear-gradient(var(--bg), var(--bg)) padding-box,
                    conic-gradient(var(--cyan) 0deg, transparent 110deg, var(--pink) 180deg, transparent 290deg, var(--cyan) 360deg) border-box;
        animation: orbit-spin 3s linear infinite;
        box-shadow: 0 0 20px rgba(0,255,224,0.35);
    }
    /* Inner conic ring â€” counter-clockwise */
    .orbit-inner {
        position: absolute; inset: 8px; border-radius: 50%;
        border: 3px solid transparent;
        background: linear-gradient(var(--bg), var(--bg)) padding-box,
                    conic-gradient(var(--orange) 0deg, transparent 110deg, var(--purple) 200deg, transparent 300deg, var(--orange) 360deg) border-box;
        animation: orbit-spin-r 2s linear infinite;
        box-shadow: 0 0 16px rgba(255,106,0,0.35);
    }
    /* Outer comet â€” cyan, clockwise */
    .orbit-dot {
        position: absolute; inset: -10px;
        animation: orbit-spin 2.5s linear infinite;
        border-radius: 50%;
    }
    .orbit-dot::before {
        content: ''; position: absolute; top: 50%; left: 0;
        width: 13px; height: 13px;
        background: radial-gradient(circle, white 0%, var(--cyan) 50%, transparent 70%);
        border-radius: 50%; transform: translateY(-50%);
        box-shadow: 0 0 18px var(--cyan), 0 0 32px rgba(0,255,224,0.4);
    }
    .orbit-dot::after {
        content: ''; position: absolute; top: 50%; left: 9px;
        width: 44px; height: 2.5px;
        background: linear-gradient(90deg, rgba(0,255,224,0.55), transparent);
        border-radius: 2px; transform: translateY(-50%);
    }
    /* Inner comet â€” pink, counter-clockwise */
    .orbit-dot2 {
        position: absolute; inset: 2px;
        animation: orbit-spin-r 1.8s linear infinite;
        border-radius: 50%;
    }
    .orbit-dot2::before {
        content: ''; position: absolute; top: 50%; right: 0;
        width: 11px; height: 11px;
        background: radial-gradient(circle, white 0%, var(--pink) 50%, transparent 70%);
        border-radius: 50%; transform: translateY(-50%);
        box-shadow: 0 0 16px var(--pink), 0 0 28px rgba(255,0,122,0.4);
    }
    .orbit-dot2::after {
        content: ''; position: absolute; top: 50%; right: 9px;
        width: 34px; height: 2px;
        background: linear-gradient(270deg, rgba(255,0,122,0.55), transparent);
        border-radius: 2px; transform: translateY(-50%);
    }
    .glow-ring { position: absolute; inset: -14px; border-radius: 50%; border: 1px solid rgba(255,106,0,0.2); animation: glow-pulse 2s ease-in-out infinite; }
    @keyframes glow-pulse { 0%,100% { transform:scale(1); opacity:0.4; box-shadow:0 0 0px rgba(255,106,0,0); } 50% { transform:scale(1.04); opacity:0.8; box-shadow:0 0 30px rgba(255,106,0,0.3); } }
    .start-btn {
        position: absolute; inset: 18px;
        background: url('https://files.catbox.moe/52799g.jpg') center/cover;
        border-radius: 50%; cursor: pointer;
        display: flex; align-items: flex-end; justify-content: center;
        font-weight: 900; font-size: 12px; letter-spacing: 3px; color: white;
        overflow: hidden; transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
        border: 2px solid rgba(255,255,255,0.15);
    }
    .start-btn::after { content: ''; position: absolute; top: -50%; left: -60%; width: 50%; height: 200%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.15), transparent); transform: skewX(-20deg); animation: btn-shine 4s ease-in-out infinite; }
    @keyframes btn-shine { 0%,100% { left:-60%; opacity:0; } 50% { left:160%; opacity:1; } }
    .start-label { position: relative; z-index: 2; padding-bottom: 10px; text-shadow: 0 2px 12px rgba(0,0,0,0.9); }

    /* âœ¨ TITLE SECTION â€” Design 3: Centered Divider */
    .title-section {
        margin-bottom: 20px;
        display: none;
        animation: fade-in-up 0.6s ease both;
        text-align: center;
        padding: 4px 0;
    }
    .title-label {
        font-size: 8px;
        letter-spacing: 5px;
        color: rgba(255,255,255,0.25);
        text-transform: uppercase;
        margin-bottom: 8px;
    }
    .title-divider {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 8px;
        padding: 0 10px;
    }
    .title-divider::before,
    .title-divider::after {
        content: '';
        flex: 1;
        height: 1px;
        background: linear-gradient(90deg, transparent, var(--pink), transparent);
    }
    .title-divider-icon {
        font-size: 11px;
        color: var(--pink);
        filter: drop-shadow(0 0 6px var(--pink));
        animation: icon-bounce 3s ease-in-out infinite;
    }
    .title-value {
        font-family: 'Rajdhani', sans-serif;
        font-size: clamp(16px, 5vw, 22px);
        font-weight: 700;
        letter-spacing: 3px;
        text-transform: uppercase;
        background: linear-gradient(135deg, white 30%, var(--cyan) 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        word-break: break-word;
        line-height: 1.2;
        padding: 0 8px;
    }

    /* ACTION BUTTONS */
    .actions { display: flex; flex-direction: column; gap: 12px; }
    .btn-modern {
        background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.07);
        border-radius: 16px; padding: 16px 20px;
        display: flex; justify-content: space-between; align-items: center;
        text-decoration: none; position: relative; overflow: hidden;
        transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    .btn-modern::before { content: ''; position: absolute; inset: 0; background: linear-gradient(135deg, rgba(255,106,0,0.06), rgba(155,0,255,0.06)); opacity: 0; transition: opacity 0.3s; }
    .btn-modern:hover::before { opacity: 1; }
    .btn-accent-bar { position: absolute; left: 0; top: 15%; bottom: 15%; width: 3px; background: linear-gradient(180deg, var(--orange), var(--pink)); box-shadow: 0 0 10px var(--orange); border-radius: 0 3px 3px 0; }
    .btn-label { font-weight: 700; font-size: 12px; letter-spacing: 1.5px; text-transform: uppercase; color: rgba(255,255,255,0.9); text-align: left; }
    .btn-sublabel { font-size: 10px; color: rgba(255,255,255,0.35); margin-top: 3px; font-weight: 300; letter-spacing: 1px; text-align: left; }
    .btn-icon-wrap { width: 42px; height: 42px; background: rgba(255,255,255,0.05); border-radius: 12px; border: 1px solid rgba(255,255,255,0.08); display: flex; align-items: center; justify-content: center; }
    .btn-icon-wrap i { font-size: 18px; background: linear-gradient(135deg, var(--orange), var(--pink)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; filter: drop-shadow(0 0 6px rgba(255,106,0,0.6)); }
    .btn-modern:nth-child(2) .btn-accent-bar { background: linear-gradient(180deg, var(--cyan), var(--purple)); box-shadow: 0 0 10px var(--cyan); }
    .btn-modern:nth-child(2) .btn-icon-wrap i { background: linear-gradient(135deg, var(--cyan), var(--purple)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; filter: drop-shadow(0 0 6px rgba(0,255,224,0.6)); }

    /* STATUS */
    .status-bar { margin-top: 28px; display: flex; align-items: center; justify-content: center; gap: 8px; }
    .status-dot { width: 6px; height: 6px; border-radius: 50%; background: var(--cyan); box-shadow: 0 0 8px var(--cyan); animation: status-blink 2s ease-in-out infinite; }
    @keyframes status-blink { 0%,100% { opacity:1; transform:scale(1); } 50% { opacity:0.3; transform:scale(0.7); } }
    .status-text { font-size: 9px; letter-spacing: 3px; color: rgba(255,255,255,0.2); font-weight: 600; text-transform: uppercase; }

    /* CLICK FX */
    .click-active { transform: scale(0.93) !important; transition: transform 0.08s ease-out !important; }
    .fire-particle { position: fixed; pointer-events: none; border-radius: 50%; z-index: 10000; animation: fire-burst var(--dur, 0.7s) ease-out forwards; }
    @keyframes fire-burst { 0% { transform:translate(-50%,-50%) scale(1); opacity:1; } 100% { transform:translate(calc(-50% + var(--tx)), calc(-50% + var(--ty))) scale(0); opacity:0; } }
    .click-ring { position: fixed; width: 10px; height: 10px; border-radius: 50%; border: 2px solid var(--cyan); pointer-events: none; z-index: 9999; animation: ring-expand 0.5s ease-out forwards; }
    @keyframes ring-expand { 0% { transform:translate(-50%,-50%) scale(1); opacity:0.8; } 100% { transform:translate(-50%,-50%) scale(12); opacity:0; } }
    .sparkle { position: fixed; border-radius: 50%; pointer-events: none; z-index: 0; animation: sparkle-rise linear forwards; }
    @keyframes sparkle-rise { 0% { transform:translateY(0) scale(1); opacity:0.8; } 100% { transform:translateY(-100vh) scale(0.3); opacity:0; } }
    .cursor-trail { position: fixed; width: 6px; height: 6px; border-radius: 50%; pointer-events: none; z-index: 9998; animation: trail-fade 0.6s ease-out forwards; }
    @keyframes trail-fade { 0% { transform:translate(-50%,-50%) scale(1); opacity:0.7; } 100% { transform:translate(-50%,-50%) scale(0); opacity:0; } }
    ::-webkit-scrollbar { width: 4px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: var(--pink); border-radius: 2px; }
    </style>
</head>
<body>

<audio id="click-sound" preload="auto"></audio>
<div class="bg-scene"></div>
<div class="orb orb-1"></div>
<div class="orb orb-2"></div>
<div class="orb orb-3"></div>
<div class="scan-line"></div>

<div class="header">
    <div class="header-slash"></div>
    <div class="logo-wrap">
        <div class="logo-tag">â€” Official Portal â€”</div>
        <h1 class="main-title" data-text="ANIME FANZ FZ">ANIME FANZ FZ</h1>
        <div class="logo-sub">âœ¦ Your Ultimate Anime Source âœ¦</div>
    </div>
    <div class="header-bottom-clip"></div>
</div>

<div class="card">

    <a href="https://t.me/+bxLawCRx2pw0MjU1" class="hub-btn tap-btn">
        <span class="hub-btn-accent"></span>
        <div class="hub-btn-text">
            <i class="fab fa-telegram tg-icon"></i>
            <span>Access Our Telegram Hub</span>
        </div>
        <div class="hub-arrow"><i class="fas fa-bolt"></i></div>
    </a>

    <div class="btn-container">
        <div class="glow-ring"></div>
        <div class="orbit-outer"></div>
        <div class="orbit-inner"></div>
        <div class="orbit-dot"></div>
        <div class="orbit-dot2"></div>
        <div id="main-btn" class="start-btn tap-btn">
            <span class="start-label">START</span>
        </div>
    </div>

    <!-- TITLE SECTION â€” Design 3: Centered Divider -->
    <div class="title-section" id="title-section">
        <div class="title-label">Title</div>
        <div class="title-divider">
            <div class="title-divider-icon">âœ¦</div>
        </div>
        <div class="title-value" id="title-text">â€”</div>
    </div>

    <div class="actions">
        <a href="http://t.me/Anime_Fanz_Fzbot" class="btn-modern tap-btn">
            <span class="btn-accent-bar"></span>
            <div>
                <div class="btn-label">Contact Admin</div>
                <div class="btn-sublabel">Direct support ðŸ’«</div>
            </div>
            <div class="btn-icon-wrap"><i class="fas fa-user-shield"></i></div>
        </a>
        <a href="https://t.me/+g6PUdKTHp5FhZDJl" class="btn-modern tap-btn">
            <span class="btn-accent-bar"></span>
            <div>
                <div class="btn-label">Support Group</div>
                <div class="btn-sublabel">Community hub ðŸŒ¸</div>
            </div>
            <div class="btn-icon-wrap"><i class="fas fa-satellite-dish"></i></div>
        </a>
    </div>

    <div class="status-bar">
        <span class="status-dot"></span>
        <span class="status-text">Powered By @Anime_Fanz_Fz</span>
        <span class="status-dot"></span>
    </div>
</div>

<script>
const SETTINGS = {
    rest_interval: 300,
    use_base64: true,
    particle_count: 14,
    sparkle_interval: 180,
    error_msg: 'Link Expired or Invalid!'
};

const SOUND_LIST = [
    "https://files.catbox.moe/6h33lc.mp3",
    "https://files.catbox.moe/wzj0v9.mp3",
    "https://files.catbox.moe/axmlfj.mp3",
    "https://files.catbox.moe/5bt3eg.mp3",
    "https://files.catbox.moe/db4by6.mp3",
    "https://files.catbox.moe/2asf5w.mp3",
    "https://files.catbox.moe/f7pwz9.mp3"
];

const tg = window.Telegram.WebApp;
tg.expand();
tg.ready();
tg.BackButton.show();
tg.BackButton.onClick(() => tg.close());

const audioEl = document.getElementById('click-sound');

/* â”€â”€ TITLE LOGIC (FIXED) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   Bot sirf ek baar encode karta hai (quote()),
   Browser URL bar ek baar aur encode karta hai automatically.
   Isliye hum sirf ek baar decodeURIComponent karte hain.
   URLSearchParams automatically ek decode karta hai,
   toh bas woh value seedha use karo â€” koi extra decode nahi.
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
(function initTitle() {
    try {
        const params = new URLSearchParams(window.location.search);
        // URLSearchParams khud ek baar decode kar deta hai
        const titleRaw = params.get('title');

        if (titleRaw && titleRaw.trim() !== '') {
            // Agar double encoded hai toh try karo extra decode
            let titleFinal = titleRaw;
            if (titleRaw.includes('%')) {
                try { titleFinal = decodeURIComponent(titleRaw); } catch(e) {}
            }

            document.getElementById('title-text').textContent = titleFinal;
            document.getElementById('title-section').style.display = 'block';
        }
    } catch(err) {
        console.warn('Title init error:', err);
    }
})();

/* â”€â”€ SPARKLES â”€â”€ */
const colors = ['#ff6a00','#ff007a','#00ffe0','#9b00ff','#ffffff'];
setInterval(() => {
    const s = document.createElement('div');
    s.className = 'sparkle';
    const size = Math.random() * 3 + 2;
    s.style.cssText = `width:${size}px;height:${size}px;left:${Math.random()*100}vw;bottom:${Math.random()*20}vh;background:${colors[Math.floor(Math.random()*colors.length)]};box-shadow:0 0 8px currentColor;animation-duration:${Math.random()*3+3}s;`;
    document.body.appendChild(s);
    setTimeout(() => s.remove(), 6000);
}, SETTINGS.sparkle_interval);

/* â”€â”€ CURSOR TRAIL â”€â”€ */
let trailCount = 0;
document.addEventListener('mousemove', (e) => {
    if (trailCount++ % 2 !== 0) return;
    const t = document.createElement('div');
    t.className = 'cursor-trail';
    const c = colors[Math.floor(Math.random()*colors.length)];
    t.style.cssText = `left:${e.clientX}px;top:${e.clientY}px;background:${c};box-shadow:0 0 6px ${c};`;
    document.body.appendChild(t);
    setTimeout(() => t.remove(), 600);
});

/* â”€â”€ CLICK FX â”€â”€ */
window.addEventListener('click', (e) => {
    const ring = document.createElement('div');
    ring.className = 'click-ring';
    ring.style.cssText = `left:${e.clientX}px;top:${e.clientY}px;`;
    document.body.appendChild(ring);
    setTimeout(() => ring.remove(), 500);

    const fireColors = [['#ffcc00','#ff8800','#ff4400'],['#ff00aa','#ff007a','#cc0055'],['#00ffe0','#00aacc','#0077aa']];
    const palette = fireColors[Math.floor(Math.random()*fireColors.length)];
    for (let i = 0; i < SETTINGS.particle_count; i++) {
        const p = document.createElement('div');
        p.className = 'fire-particle';
        const angle = Math.random() * Math.PI * 2;
        const vel = Math.random() * 130 + 30;
        const size = Math.random() * 7 + 3;
        const color = palette[Math.floor(Math.random()*palette.length)];
        p.style.cssText = `left:${e.clientX}px;top:${e.clientY}px;width:${size}px;height:${size}px;background:${color};box-shadow:0 0 ${size*2}px ${color};--tx:${Math.cos(angle)*vel}px;--ty:${Math.sin(angle)*vel}px;--dur:${Math.random()*0.4+0.4}s;`;
        document.body.appendChild(p);
        setTimeout(() => p.remove(), 800);
    }
});

/* â”€â”€ BUTTON LOGIC â”€â”€ */
document.querySelectorAll('.tap-btn').forEach(btn => {
    btn.addEventListener('click', function(e) {
        e.preventDefault();
        const url = this.getAttribute('href');

        audioEl.src = SOUND_LIST[Math.floor(Math.random() * SOUND_LIST.length)];
        audioEl.currentTime = 0;
        audioEl.play().catch(() => {});

        if (tg.HapticFeedback) tg.HapticFeedback.impactOccurred('medium');
        this.classList.add('click-active');

        // Rings compress inward on click
        const rings = document.querySelectorAll('.orbit-outer, .orbit-inner, .orbit-dot, .orbit-dot2');
        rings.forEach(r => {
            r.style.transition = 'transform 0.15s ease, opacity 0.15s ease';
            r.style.transform  = 'scale(0.7)';
            r.style.opacity    = '0.4';
        });

        setTimeout(() => {
            this.classList.remove('click-active');
            rings.forEach(r => {
                r.style.transform = 'scale(1)';
                r.style.opacity   = '1';
            });
            if (url) {
                window.location.href = url;
            } else if (this.id === 'main-btn') {
                const target = new URLSearchParams(window.location.search).get('target');
                if (target) {
                    try {
                        window.location.href = SETTINGS.use_base64 ? atob(target) : decodeURIComponent(target);
                    } catch {
                        tg.showPopup({ message: SETTINGS.error_msg });
                    }
                } else {
                    tg.showPopup({ message: 'Target URL missing!' });
                }
            }
        }, SETTINGS.rest_interval);
    });
});
</script>
</body>
</html>
